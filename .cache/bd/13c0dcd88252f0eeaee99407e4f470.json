{"id":"pages/EditorPage.js","dependencies":[{"name":"C:\\Users\\Dell\\CodeShare\\package.json","includedInParent":true,"mtime":1686079759432},{"name":"react","loc":{"line":3,"column":51,"index":69},"parent":"C:\\Users\\Dell\\CodeShare\\src\\pages\\EditorPage.js","resolved":"C:\\Users\\Dell\\CodeShare\\node_modules\\react\\index.js"},{"name":"react-hot-toast","loc":{"line":4,"column":18,"index":97},"parent":"C:\\Users\\Dell\\CodeShare\\src\\pages\\EditorPage.js","resolved":"C:\\Users\\Dell\\CodeShare\\node_modules\\react-hot-toast\\dist\\react-hot-toast.esm.js"},{"name":"../server/Actions","loc":{"line":5,"column":20,"index":137},"parent":"C:\\Users\\Dell\\CodeShare\\src\\pages\\EditorPage.js","resolved":"C:\\Users\\Dell\\CodeShare\\src\\server\\Actions.js"},{"name":"../components/Client","loc":{"line":6,"column":19,"index":178},"parent":"C:\\Users\\Dell\\CodeShare\\src\\pages\\EditorPage.js","resolved":"C:\\Users\\Dell\\CodeShare\\src\\components\\Client.js"},{"name":"../components/Editor","loc":{"line":7,"column":19,"index":222},"parent":"C:\\Users\\Dell\\CodeShare\\src\\pages\\EditorPage.js","resolved":"C:\\Users\\Dell\\CodeShare\\src\\components\\Editor.js"},{"name":"../components/FileBrowser","loc":{"line":8,"column":32,"index":279},"parent":"C:\\Users\\Dell\\CodeShare\\src\\pages\\EditorPage.js","resolved":"C:\\Users\\Dell\\CodeShare\\src\\components\\FileBrowser.js"},{"name":"../components/Terminal","loc":{"line":9,"column":26,"index":334},"parent":"C:\\Users\\Dell\\CodeShare\\src\\pages\\EditorPage.js","resolved":"C:\\Users\\Dell\\CodeShare\\src\\components\\Terminal.js"},{"name":"@mui/material","loc":{"line":10,"column":31,"index":391},"parent":"C:\\Users\\Dell\\CodeShare\\src\\pages\\EditorPage.js","resolved":"C:\\Users\\Dell\\CodeShare\\node_modules\\@mui\\material\\index.js"},{"name":"../socket","loc":{"line":13,"column":27,"index":440},"parent":"C:\\Users\\Dell\\CodeShare\\src\\pages\\EditorPage.js","resolved":"C:\\Users\\Dell\\CodeShare\\src\\socket.js"},{"name":"react-router-dom","loc":{"line":19,"column":7,"index":538},"parent":"C:\\Users\\Dell\\CodeShare\\src\\pages\\EditorPage.js","resolved":"C:\\Users\\Dell\\CodeShare\\node_modules\\react-router-dom\\index.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactHotToast = _interopRequireDefault(require(\"react-hot-toast\"));\n\nvar _Actions = _interopRequireDefault(require(\"../server/Actions\"));\n\nvar _Client = _interopRequireDefault(require(\"../components/Client\"));\n\nvar _Editor = _interopRequireDefault(require(\"../components/Editor\"));\n\nvar _FileBrowser = _interopRequireDefault(require(\"../components/FileBrowser\"));\n\nvar _Terminal = _interopRequireDefault(require(\"../components/Terminal\"));\n\nvar _material = require(\"@mui/material\");\n\nvar _socket = require(\"../socket\");\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// Editor Page\nconst EditorPage = () => {\n  const socketRef = (0, _react.useRef)(null);\n  const codeRef = (0, _react.useRef)(null);\n  const location = (0, _reactRouterDom.useLocation)();\n  const {\n    roomId\n  } = (0, _reactRouterDom.useParams)();\n  const reactNavigator = (0, _reactRouterDom.useNavigate)();\n  const [clients, setClients] = (0, _react.useState)([]);\n  const [value, setValue] = (0, _react.useState)(0);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  (0, _react.useEffect)(() => {\n    const init = async () => {\n      socketRef.current = await (0, _socket.initSocket)();\n      socketRef.current.on('connect_error', err => handleErrors(err));\n      socketRef.current.on('connect_failed', err => handleErrors(err));\n\n      function handleErrors(e) {\n        console.log('socket error', e);\n\n        _reactHotToast.default.error('Socket connection failed, try again later.');\n\n        reactNavigator('/');\n      }\n\n      socketRef.current.emit(_Actions.default.JOIN, {\n        roomId,\n        username: location.state?.username\n      }); // Listening for joined event\n\n      socketRef.current.on(_Actions.default.JOINED, _ref => {\n        let {\n          clients,\n          username,\n          socketId\n        } = _ref;\n\n        if (username !== location.state?.username) {\n          _reactHotToast.default.success(`${username} joined the room.`);\n\n          console.log(`${username} joined`);\n        }\n\n        setClients(clients);\n        socketRef.current.emit(_Actions.default.SYNC_CODE, {\n          code: codeRef.current,\n          socketId\n        });\n      }); // Listening for disconnected\n\n      socketRef.current.on(_Actions.default.DISCONNECTED, _ref2 => {\n        let {\n          socketId,\n          username\n        } = _ref2;\n\n        _reactHotToast.default.success(`${username} left the room.`);\n\n        setClients(prev => {\n          return prev.filter(client => client.socketId !== socketId);\n        });\n      });\n    };\n\n    init();\n    return () => {\n      socketRef.current.disconnect();\n      socketRef.current.off(_Actions.default.JOINED);\n      socketRef.current.off(_Actions.default.DISCONNECTED);\n    };\n  }, []);\n\n  async function copyRoomId() {\n    try {\n      await navigator.clipboard.writeText(roomId);\n\n      _reactHotToast.default.success('Room ID has been copied to your clipboard');\n    } catch (err) {\n      _reactHotToast.default.error('Could not copy the Room ID');\n\n      console.error(err);\n    }\n  }\n\n  function leaveRoom() {\n    reactNavigator('/');\n  }\n\n  if (!location.state) {\n    return /*#__PURE__*/_react.default.createElement(_reactRouterDom.Navigate, {\n      to: \"/\"\n    });\n  }\n\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"mainWrap\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"editorWrap\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", null, /*#__PURE__*/_react.default.createElement(_material.Box, {\n    sx: {\n      borderBottom: 1,\n      borderColor: 'divider'\n    }\n  }, /*#__PURE__*/_react.default.createElement(_material.Tabs, {\n    value: value,\n    onChange: handleChange\n  }, /*#__PURE__*/_react.default.createElement(_material.Tab, {\n    label: \"Tab 1\"\n  }), /*#__PURE__*/_react.default.createElement(_material.Tab, {\n    label: \"Tab 2\"\n  }), /*#__PURE__*/_react.default.createElement(_material.Tab, {\n    label: \"Tab 3\"\n  })), value === 0 && /*#__PURE__*/_react.default.createElement(\"div\", null, /*#__PURE__*/_react.default.createElement(_Editor.default, {\n    socketRef: socketRef,\n    roomId: roomId,\n    onCodeChange: code => {\n      codeRef.current = code;\n    }\n  })), value === 1 && /*#__PURE__*/_react.default.createElement(\"div\", null, \"Content for Tab 2\"), value === 2 && /*#__PURE__*/_react.default.createElement(\"div\", null, \"Content for Tab 3\"))), /*#__PURE__*/_react.default.createElement(_Terminal.default, {\n    roomId: roomId,\n    socketRef: socketRef\n  })), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"aside\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"asideInner\"\n  }, /*#__PURE__*/_react.default.createElement(_FileBrowser.default, null))));\n};\n\nvar _default = EditorPage;\n/*\r\n <div className=\"aside\">\r\n                <div className=\"asideInner\">\r\n                    <div className=\"logo\">\r\n                        <h1>CodeVilla\r\n                        </h1>\r\n                    </div>\r\n                    <h3>Connected</h3>\r\n                    <div className=\"clientsList\">\r\n                        {clients.map((client) => (\r\n                            <Client\r\n                                key={client.socketId}\r\n                                username={client.username}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n                <button className=\"btn copyBtn\" onClick={copyRoomId}>\r\n                    Copy ROOM ID\r\n                </button>\r\n                <button className=\"btn leaveBtn\" onClick={leaveRoom}>\r\n                    Leave\r\n                </button>\r\n            </div>\r\n            */\n\nexports.default = _default;"},"sourceMaps":null,"error":null,"hash":"6968f3594ece4b4cfcd384077cb36a9b","cacheData":{"env":{}}}